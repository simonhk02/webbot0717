<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ©Ÿæ¢°äººç®¡ç† - ç°¡æ½”ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        /* é ‚éƒ¨å°èˆª */
        .header {
            background: white;
            border-bottom: 1px solid #e9ecef;
            padding: 0 24px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .nav-back {
            background: none;
            border: none;
            color: #007AFF;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-primary {
            background: #007AFF;
            color: white;
        }

        .btn-primary:hover {
            background: #0056CC;
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        /* ä¸»è¦å…§å®¹ */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        /* æ­¡è¿å€åŸŸ */
        .welcome-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .welcome-title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 12px;
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            color: #6b7280;
            margin-bottom: 32px;
        }

        /* å¿«é€Ÿçµ±è¨ˆ */
        .stats-row {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
        }

        .stat-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-width: 120px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: #007AFF;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #6b7280;
        }

        /* æ©Ÿæ¢°äººé¡å‹é¸æ“‡ */
        .bot-types-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 24px;
            text-align: center;
        }

        .bot-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .bot-type-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .bot-type-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
            border-color: #007AFF;
        }

        .bot-type-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .bot-type-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .bot-type-description {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 16px;
        }

        .bot-type-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .feature-tag {
            background: #f0f9ff;
            color: #0369a1;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }

        /* ç¾æœ‰æ©Ÿæ¢°äººåˆ—è¡¨ */
        .existing-bots-section {
            margin-bottom: 40px;
        }

        .bots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .bot-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: all 0.2s ease;
        }

        .bot-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .bot-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .bot-avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-right: 16px;
        }

        .bot-info {
            flex: 1;
        }

        .bot-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 4px;
        }

        .bot-type {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .bot-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-active {
            background: #d1fae5;
            color: #065f46;
        }

        .status-inactive {
            background: #fef3c7;
            color: #92400e;
        }

        .bot-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-start {
            background: #10b981;
            color: white;
        }

        .btn-stop {
            background: #f59e0b;
            color: white;
        }

        .btn-config {
            background: #6b7280;
            color: white;
        }

        /* ç©ºç‹€æ…‹ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .empty-icon {
            font-size: 4rem;
            margin-bottom: 16px;
            opacity: 0.6;
        }

        .empty-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .empty-text {
            color: #6b7280;
            margin-bottom: 24px;
        }

        /* é…ç½®å½ˆçª— */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid #e9ecef;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
        }

        .modal-subtitle {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6b7280;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
        }

        .modal-close:hover {
            background: #f3f4f6;
        }

        .modal-body {
            padding: 24px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: border-color 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #007AFF;
            box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 0.9rem;
            background: white;
            cursor: pointer;
        }

        .modal-footer {
            padding: 16px 24px 24px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .btn-cancel {
            background: #f3f4f6;
            color: #374151;
        }

        .btn-save {
            background: #007AFF;
            color: white;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .main-content {
                padding: 20px 16px;
            }
            
            .stats-row {
                flex-direction: column;
                align-items: center;
            }
            
            .bot-types {
                grid-template-columns: 1fr;
            }
            
            .bots-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- é ‚éƒ¨å°èˆª -->
    <header class="header">
        <button class="nav-back" onclick="goBack()">
            <span>â†</span> è¿”å›
        </button>
        <div class="nav-title">æ©Ÿæ¢°äººç®¡ç†</div>
        <div class="header-actions">
            <button class="btn btn-secondary" onclick="showTemplates()">
                <span>ğŸ“‹</span> æ¨¡æ¿
            </button>
            <button class="btn btn-primary" onclick="showQuickStart()">
                <span>âš¡</span> å¿«é€Ÿé–‹å§‹
            </button>
        </div>
    </header>

    <!-- ä¸»è¦å…§å®¹ -->
    <main class="main-content">
        <!-- æ­¡è¿å€åŸŸ -->
        <section class="welcome-section">
            <h1 class="welcome-title">ğŸ¤– æ™ºèƒ½æ©Ÿæ¢°äººç®¡ç†</h1>
            <p class="welcome-subtitle">é¸æ“‡æ©Ÿæ¢°äººé¡å‹ï¼Œä¸€éµé–‹å§‹è‡ªå‹•åŒ–ä¹‹æ—…</p>
        </section>

        <!-- å¿«é€Ÿçµ±è¨ˆ -->
        <section class="stats-row">
            <div class="stat-item">
                <div class="stat-number" id="totalBots">0</div>
                <div class="stat-label">ç¸½æ©Ÿæ¢°äºº</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="activeBots">0</div>
                <div class="stat-label">é‹è¡Œä¸­</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="readyBots">0</div>
                <div class="stat-label">å°±ç·’</div>
            </div>
        </section>

        <!-- æ©Ÿæ¢°äººé¡å‹é¸æ“‡ -->
        <section class="bot-types-section">
            <h2 class="section-title">é¸æ“‡æ©Ÿæ¢°äººé¡å‹</h2>
            <div class="bot-types">
                <div class="bot-type-card" onclick="createBot('whatsapp')">
                    <div class="bot-type-icon">ğŸ’¬</div>
                    <div class="bot-type-name">WhatsApp æ©Ÿæ¢°äºº</div>
                    <div class="bot-type-description">è™•ç† WhatsApp æ¶ˆæ¯ï¼Œæ”¯æŒåœ–ç‰‡è­˜åˆ¥å’Œæ™ºèƒ½å°è©±</div>
                    <div class="bot-type-features">
                        <span class="feature-tag">åœ–ç‰‡è­˜åˆ¥</span>
                        <span class="feature-tag">æ™ºèƒ½å°è©±</span>
                        <span class="feature-tag">è²»ç”¨è¨˜éŒ„</span>
                    </div>
                </div>
                
                <div class="bot-type-card" onclick="createBot('telegram')">
                    <div class="bot-type-icon">âœˆï¸</div>
                    <div class="bot-type-name">Telegram æ©Ÿæ¢°äºº</div>
                    <div class="bot-type-description">é«˜æ•ˆçš„ Telegram è‡ªå‹•åŒ–åŠ©æ‰‹</div>
                    <div class="bot-type-features">
                        <span class="feature-tag">å¿«é€Ÿå›è¦†</span>
                        <span class="feature-tag">ç¾¤çµ„ç®¡ç†</span>
                        <span class="feature-tag">æ–‡ä»¶è™•ç†</span>
                    </div>
                </div>
                
                <div class="bot-type-card" onclick="createBot('discord')">
                    <div class="bot-type-icon">ğŸ®</div>
                    <div class="bot-type-name">Discord æ©Ÿæ¢°äºº</div>
                    <div class="bot-type-description">ç¤¾ç¾¤æœå‹™å™¨è‡ªå‹•åŒ–ç®¡ç†</div>
                    <div class="bot-type-features">
                        <span class="feature-tag">ç¤¾ç¾¤ç®¡ç†</span>
                        <span class="feature-tag">éŠæˆ²æ•´åˆ</span>
                        <span class="feature-tag">äº‹ä»¶é€šçŸ¥</span>
                    </div>
                </div>
                
                <div class="bot-type-card" onclick="createBot('custom')">
                    <div class="bot-type-icon">ğŸ› ï¸</div>
                    <div class="bot-type-name">è‡ªå®šç¾©æ©Ÿæ¢°äºº</div>
                    <div class="bot-type-description">ä½¿ç”¨å·¥ä½œæµè¨­è¨ˆå™¨å‰µå»ºå°ˆå±¬æ©Ÿæ¢°äºº</div>
                    <div class="bot-type-features">
                        <span class="feature-tag">å®Œå…¨è‡ªå®šç¾©</span>
                        <span class="feature-tag">å¯è¦–åŒ–è¨­è¨ˆ</span>
                        <span class="feature-tag">ç„¡é™å¯èƒ½</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç¾æœ‰æ©Ÿæ¢°äººåˆ—è¡¨ -->
        <section class="existing-bots-section">
            <h2 class="section-title">æˆ‘çš„æ©Ÿæ¢°äºº</h2>
            <div class="bots-grid" id="botsGrid">
                <!-- æ©Ÿæ¢°äººå¡ç‰‡å°‡åœ¨é€™è£¡å‹•æ…‹è¼‰å…¥ -->
            </div>
            
            <div class="empty-state" id="emptyState">
                <div class="empty-icon">ğŸ¤–</div>
                <div class="empty-title">é‚„æ²’æœ‰æ©Ÿæ¢°äºº</div>
                <div class="empty-text">é¸æ“‡ä¸Šæ–¹çš„æ©Ÿæ¢°äººé¡å‹ï¼Œé–‹å§‹å‰µå»ºæ‚¨çš„ç¬¬ä¸€å€‹æ™ºèƒ½åŠ©æ‰‹</div>
            </div>
        </section>
    </main>

    <!-- é…ç½®å½ˆçª— -->
    <div class="modal" id="configModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">å‰µå»ºæ©Ÿæ¢°äºº</div>
                <div class="modal-subtitle" id="modalSubtitle">ç°¡å–®é…ç½®ï¼Œå¿«é€Ÿé–‹å§‹</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="botConfigForm">
                    <div class="form-group">
                        <label class="form-label">æ©Ÿæ¢°äººåç¨±</label>
                        <input type="text" class="form-input" id="botName" placeholder="çµ¦æ‚¨çš„æ©Ÿæ¢°äººå–å€‹åå­—">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">ç”¨é€”</label>
                        <select class="form-select" id="botPurpose">
                            <option value="expense">ğŸ’° è²»ç”¨è¨˜éŒ„åŠ©æ‰‹</option>
                            <option value="customer">ğŸ§ å®¢æœæ©Ÿæ¢°äºº</option>
                            <option value="scheduler">ğŸ“… å®šæ™‚æé†’</option>
                            <option value="general">ğŸ¤– é€šç”¨åŠ©æ‰‹</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">AI æ™ºèƒ½åº¦</label>
                        <select class="form-select" id="aiLevel">
                            <option value="basic">ğŸŒŸ åŸºç¤ç‰ˆ (å¿«é€ŸéŸ¿æ‡‰)</option>
                            <option value="advanced">â­â­ é«˜ç´šç‰ˆ (æ›´æ™ºèƒ½)</option>
                            <option value="premium">â­â­â­ å°ˆæ¥­ç‰ˆ (æœ€å¼·AI)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">å€‹æ€§è¨­å®š</label>
                        <select class="form-select" id="personality">
                            <option value="professional">ğŸ¯ å°ˆæ¥­åš´è¬¹</option>
                            <option value="friendly">ğŸ˜Š å‹å–„è¦ªåˆ‡</option>
                            <option value="funny">ğŸ˜„ å¹½é»˜é¢¨è¶£</option>
                            <option value="efficient">âš¡ é«˜æ•ˆç°¡æ½”</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="btn btn-save" onclick="saveBotConfig()">å‰µå»ºæ©Ÿæ¢°äºº</button>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€è®Šæ•¸
        let bots = [];
        let currentBotType = '';

        // é é¢è¼‰å…¥å®Œæˆ
        document.addEventListener('DOMContentLoaded', function() {
            loadBots();
            updateStats();
        });

        // å‰µå»ºæ©Ÿæ¢°äºº
        function createBot(type) {
            currentBotType = type;
            
            const typeNames = {
                'whatsapp': 'WhatsApp æ©Ÿæ¢°äºº',
                'telegram': 'Telegram æ©Ÿæ¢°äºº',
                'discord': 'Discord æ©Ÿæ¢°äºº',
                'custom': 'è‡ªå®šç¾©æ©Ÿæ¢°äºº'
            };
            
            const typeIcons = {
                'whatsapp': 'ğŸ’¬',
                'telegram': 'âœˆï¸',
                'discord': 'ğŸ®',
                'custom': 'ğŸ› ï¸'
            };
            
            document.getElementById('modalTitle').textContent = `å‰µå»º ${typeNames[type]}`;
            document.getElementById('modalSubtitle').textContent = `${typeIcons[type]} ç°¡å–®é…ç½®ï¼Œå¿«é€Ÿé–‹å§‹`;
            
            // æ ¹æ“šé¡å‹é è¨­åç¨±
            document.getElementById('botName').value = typeNames[type];
            
            // é¡¯ç¤ºå½ˆçª—
            document.getElementById('configModal').style.display = 'flex';
        }

        // é—œé–‰å½ˆçª—
        function closeModal() {
            document.getElementById('configModal').style.display = 'none';
        }

        // ä¿å­˜æ©Ÿæ¢°äººé…ç½®
        async function saveBotConfig() {
            const name = document.getElementById('botName').value;
            const purpose = document.getElementById('botPurpose').value;
            const aiLevel = document.getElementById('aiLevel').value;
            const personality = document.getElementById('personality').value;
            
            if (!name.trim()) {
                alert('è«‹è¼¸å…¥æ©Ÿæ¢°äººåç¨±');
                return;
            }
            
            const botConfig = {
                name: name,
                type: currentBotType,
                purpose: purpose,
                aiLevel: aiLevel,
                personality: personality,
                createdAt: new Date().toISOString()
            };
            
            try {
                const response = await fetch('/workflow/api/bots', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-user-id': 'demo-user',
                        'x-tenant-id': 'demo-tenant'
                    },
                    body: JSON.stringify(botConfig)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess('æ©Ÿæ¢°äººå‰µå»ºæˆåŠŸï¼');
                    closeModal();
                    loadBots();
                    
                    // å¦‚æœæ˜¯è‡ªå®šç¾©æ©Ÿæ¢°äººï¼Œè·³è½‰åˆ°å·¥ä½œæµè¨­è¨ˆå™¨
                    if (currentBotType === 'custom') {
                        setTimeout(() => {
                            window.location.href = '/workflow/';
                        }, 1000);
                    }
                } else {
                    showError('å‰µå»ºå¤±æ•—ï¼š' + data.message);
                }
            } catch (error) {
                console.error('å‰µå»ºæ©Ÿæ¢°äººå¤±æ•—:', error);
                showError('ç¶²çµ¡éŒ¯èª¤ï¼Œè«‹ç¨å¾Œé‡è©¦');
            }
        }

        // è¼‰å…¥æ©Ÿæ¢°äººåˆ—è¡¨
        async function loadBots() {
            try {
                const response = await fetch('/workflow/api/bots', {
                    headers: {
                        'x-user-id': 'demo-user',
                        'x-tenant-id': 'demo-tenant'
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    bots = data.data || [];
                    renderBots();
                    updateStats();
                } else {
                    console.error('è¼‰å…¥æ©Ÿæ¢°äººå¤±æ•—:', data.message);
                }
            } catch (error) {
                console.error('è¼‰å…¥æ©Ÿæ¢°äººå¤±æ•—:', error);
            }
        }

        // æ¸²æŸ“æ©Ÿæ¢°äººåˆ—è¡¨
        function renderBots() {
            const grid = document.getElementById('botsGrid');
            const emptyState = document.getElementById('emptyState');
            
            if (bots.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            const typeIcons = {
                'whatsapp': 'ğŸ’¬',
                'telegram': 'âœˆï¸',
                'discord': 'ğŸ®',
                'custom': 'ğŸ› ï¸'
            };
            
            const typeColors = {
                'whatsapp': '#25d366',
                'telegram': '#0088cc',
                'discord': '#7289da',
                'custom': '#6b7280'
            };
            
            grid.innerHTML = bots.map(bot => `
                <div class="bot-card">
                    <div class="bot-header">
                        <div class="bot-avatar" style="background: ${typeColors[bot.type] || '#6b7280'};">
                            ${typeIcons[bot.type] || 'ğŸ¤–'}
                        </div>
                        <div class="bot-info">
                            <div class="bot-name">${bot.name}</div>
                            <div class="bot-type">${getTypeName(bot.type)}</div>
                        </div>
                        <div class="bot-status ${bot.status === 'active' ? 'status-active' : 'status-inactive'}">
                            ${bot.status === 'active' ? 'é‹è¡Œä¸­' : 'å·²åœæ­¢'}
                        </div>
                    </div>
                    <div class="bot-actions">
                        ${bot.status === 'active' 
                            ? `<button class="btn-small btn-stop" onclick="stopBot(${bot.id})">åœæ­¢</button>`
                            : `<button class="btn-small btn-start" onclick="startBot(${bot.id})">å•Ÿå‹•</button>`
                        }
                        <button class="btn-small btn-config" onclick="configBot(${bot.id})">é…ç½®</button>
                    </div>
                </div>
            `).join('');
        }

        // ç²å–é¡å‹åç¨±
        function getTypeName(type) {
            const names = {
                'whatsapp': 'WhatsApp',
                'telegram': 'Telegram',
                'discord': 'Discord',
                'custom': 'è‡ªå®šç¾©'
            };
            return names[type] || 'æœªçŸ¥';
        }

        // æ›´æ–°çµ±è¨ˆ
        function updateStats() {
            const total = bots.length;
            const active = bots.filter(bot => bot.status === 'active').length;
            const ready = bots.filter(bot => bot.status === 'inactive').length;
            
            document.getElementById('totalBots').textContent = total;
            document.getElementById('activeBots').textContent = active;
            document.getElementById('readyBots').textContent = ready;
        }

        // å•Ÿå‹•æ©Ÿæ¢°äºº
        async function startBot(botId) {
            try {
                const response = await fetch(`/workflow/api/bots/${botId}/enable`, {
                    method: 'POST',
                    headers: {
                        'x-user-id': 'demo-user',
                        'x-tenant-id': 'demo-tenant'
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess('æ©Ÿæ¢°äººå•Ÿå‹•æˆåŠŸï¼');
                    loadBots();
                } else {
                    showError('å•Ÿå‹•å¤±æ•—ï¼š' + data.message);
                }
            } catch (error) {
                console.error('å•Ÿå‹•æ©Ÿæ¢°äººå¤±æ•—:', error);
                showError('ç¶²çµ¡éŒ¯èª¤ï¼Œè«‹ç¨å¾Œé‡è©¦');
            }
        }

        // åœæ­¢æ©Ÿæ¢°äºº
        async function stopBot(botId) {
            try {
                const response = await fetch(`/workflow/api/bots/${botId}/disable`, {
                    method: 'POST',
                    headers: {
                        'x-user-id': 'demo-user',
                        'x-tenant-id': 'demo-tenant'
                    }
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess('æ©Ÿæ¢°äººå·²åœæ­¢');
                    loadBots();
                } else {
                    showError('åœæ­¢å¤±æ•—ï¼š' + data.message);
                }
            } catch (error) {
                console.error('åœæ­¢æ©Ÿæ¢°äººå¤±æ•—:', error);
                showError('ç¶²çµ¡éŒ¯èª¤ï¼Œè«‹ç¨å¾Œé‡è©¦');
            }
        }

        // é…ç½®æ©Ÿæ¢°äºº
        function configBot(botId) {
            const bot = bots.find(b => b.id === botId);
            if (!bot) return;
            
            // é€™è£¡å¯ä»¥æ‰“é–‹é…ç½®é¢æ¿
            alert(`é…ç½® ${bot.name} çš„åŠŸèƒ½å³å°‡æ¨å‡º`);
        }

        // é¡¯ç¤ºæ¨¡æ¿
        function showTemplates() {
            alert('æ©Ÿæ¢°äººæ¨¡æ¿åŠŸèƒ½å³å°‡æ¨å‡º');
        }

        // é¡¯ç¤ºå¿«é€Ÿé–‹å§‹
        function showQuickStart() {
            alert('å¿«é€Ÿé–‹å§‹åš®å°å³å°‡æ¨å‡º');
        }

        // è¿”å›
        function goBack() {
            window.location.href = '/workflow/';
        }

        // æç¤ºå‡½æ•¸
        function showSuccess(message) {
            alert('âœ… ' + message);
        }

        function showError(message) {
            alert('âŒ ' + message);
        }

        // é»æ“Šå½ˆçª—å¤–éƒ¨é—œé–‰
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('configModal');
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html> 